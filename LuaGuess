-- Seed the random number generator so results change each run
math.randomseed(os.time())

-- ===== GAME LOOP =====
while true do

    -- Computer picks a number from 1 to 100
    local secret = math.random(1, 100)

    -- Player gets 7 attempts
    local attemptsLeft = 7
    local won = false

    print("I'm thinking of a number from 1 to 100.")
    print("You have 7 attempts to guess it.")

    -- ===== GUESS LOOP =====
    while attemptsLeft > 0 do
        print("Enter your guess:")
        local input = io.read()

          -- Error handling: convert input to a number
        local guess = tonumber(input)

        if guess == nil then
            -- Player typed a letter or invalid input
            print("Please enter a valid number.")
        else
            -- Valid number entered

            if guess == secret then
                print("Correct! You win!")
                won = true
                break
            elseif guess < secret then
                print("Too low!")
            else
                print("Too high!")
            end

            attemptsLeft = attemptsLeft - 1
            print("Attempts remaining: " .. attemptsLeft)
        end
    end

      -- ===== WIN / LOSE MESSAGE =====
    if not won then
        print("You lose! The number was " .. secret)
    end

    -- ===== REPLAY OPTION =====
    print("Play again? (yes/no)")
    local answer = io.read()

    if answer ~= "yes" then
        print("Thanks for playing!")
        break
    end

end